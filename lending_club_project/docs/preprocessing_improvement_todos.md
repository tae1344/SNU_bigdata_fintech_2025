# Preprocessing.ipynb 개선사항 적용 To-Do 리스트

## 📋 개요

Lending Club 프로젝트에 Preprocessing.ipynb의 개선된 전처리 기법들을 단계적으로 적용하여 데이터 품질과 모델 성능을 향상시키는 계획입니다.

---

## 🚀 Phase 1: 즉시 적용 가능한 개선사항 (High Priority)

### ✅ Task 1.1: 데이터 로딩 개선

**파일**: `data_analysis/data_exploration.py`
**목표**: 경고 방지 및 안정적인 데이터 로딩

**To-Do:**

- [x] `pd.read_csv()` 호출에 `low_memory=False` 추가
- [x] 데이터 로딩 시 예외 처리 추가
- [x] 메모리 사용량 모니터링 기능 추가

**예상 소요시간**: 30분
**담당자**: 개발팀
**완료 기준**: 데이터 로딩 시 경고 메시지 제거

---

### ✅ Task 1.2: 타겟 변수 생성 로직 개선

**파일**: `data_analysis/target_variable_definition.py`
**목표**: 더 정확한 타겟 변수 생성

**To-Do:**

- [x] `selected_status` 리스트 정의 (Charged Off, Fully Paid 등)
- [x] `loan_status` 매핑 딕셔너리 생성
- [x] 기존 `is_default` 로직을 새로운 `target` 로직으로 교체
- [x] 타겟 변수 분포 시각화 추가

**예상 소요시간**: 1시간
**담당자**: 데이터 분석팀
**완료 기준**: 타겟 변수 분포가 예상과 일치

---

### ✅ Task 1.3: 이상 로우 제거 로직 추가

**파일**: `data_analysis/data_exploration.py`
**목표**: 데이터 품질 향상

**To-Do:**

- [x] `id != 'Loans that do not meet the credit policy'` 필터링 추가
- [x] 제거된 로우 수 기록
- [x] 제거 전후 데이터 크기 비교 로그 추가

**예상 소요시간**: 30분
**담당자**: 데이터 분석팀
**완료 기준**: 이상 로우가 제거되고 데이터 크기가 적절히 감소

---

### ✅ Task 1.4: 문자열 데이터 정리 강화

**파일**: `feature_engineering/feature_engineering_step2_scaling.py`
**목표**: 더 견고한 데이터 타입 변환

**To-Do:**

- [x] `clean_percentage_columns()` 함수 생성
- [x] `int_rate`, `revol_util` 컬럼의 '%' 제거 로직 추가
- [x] 변환 실패 시 예외 처리 추가
- [x] 변환 전후 데이터 타입 검증 추가

**예상 소요시간**: 1시간
**담당자**: 개발팀
**완료 기준**: 퍼센트 컬럼들이 올바르게 float로 변환

---

## ⚡ Phase 2: 단기 적용 가능한 개선사항 (Medium Priority)

### ✅ Task 2.1: FICO 점수 처리 방식 개선

**파일**: `feature_engineering/feature_engineering_step3_new_features.py`
**목표**: 더 정교한 FICO 점수 구간화

**To-Do:**

- [x] `create_fico_features()` 함수 생성
- [x] FICO 평균값 계산 로직 추가
- [x] 5점 단위 구간화 로직 구현
- [x] Ordered Category dtype 변환
- [x] Ordinal encoding 적용

**예상 소요시간**: 2시간
**담당자**: 특성 엔지니어링팀
**완료 기준**: FICO 관련 특성이 체계적으로 생성됨

---

### ✅ Task 2.2: 범주형 변수 인코딩 개선

**파일**: `feature_engineering/feature_engineering_step1_encoding.py`
**목표**: 더 체계적인 범주형 변수 처리

**To-Do:**

- [x] `enhanced_categorical_encoding()` 함수 생성
- [x] sub_grade 순서형 인코딩 구현 (A1→0, G5→34)
- [x] emp_length 수치화 + 결측 플래그 추가 (`emp_length_is_na`)
- [x] home_ownership 카테고리 정리 (NONE/ANY → OTHER)
- [x] 카이제곱 독립성 검정 시스템 구현
- [x] 범주별 부도율 분석 및 시각화 추가
- [x] 기존 인코딩 로직과 통합
- [x] 인코딩 결과 검증 추가

**예상 소요시간**: 3시간
**담당자**: 특성 엔지니어링팀
**완료 기준**: 범주형 변수들이 체계적으로 인코딩되고 통계적 검증 완료

---

### ✅ Task 2.3: 이상값 처리 강화

**파일**: `feature_engineering/feature_engineering_step2_scaling.py`
**목표**: 더 정교한 이상값 처리

**To-Do:**

- [x] `handle_outliers()` 함수 생성
- [x] dti 999 이상값 처리
- [x] revol_util 100% 초과값 클리핑
- [x] annual_inc IQR 기반 이상값 처리
- [x] 이상값 처리 전후 통계 비교

**예상 소요시간**: 1.5시간
**담당자**: 데이터 분석팀
**완료 기준**: 이상값이 적절히 처리되고 데이터 분포가 개선됨

---

### ✅ Task 2.4: 주(state) 데이터 처리 개선

**파일**: `feature_engineering/feature_engineering_step1_encoding.py`
**목표**: 더 효율적인 주 데이터 처리

**To-Do:**

- [x] `optimize_state_encoding()` 함수 생성
- [x] 상위 99% 주만 유지하는 로직 구현 (51개 → 45개)
- [x] 나머지는 'OTHER'로 그룹화
- [x] 변환 전후 카이제곱 검정 비교 분석
- [x] 주별 부도율 시각화 (원본 vs 축소 버전)
- [x] 카테고리 타입으로 변환
- [x] 주별 분포 시각화 추가

**예상 소요시간**: 2시간
**담당자**: 특성 엔지니어링팀
**완료 기준**: 주 데이터가 효율적으로 처리되고 변환 효과 검증 완료

---

### ✅ Task 2.5: 통계적 검증 시스템 구축

**파일**: `feature_engineering/feature_engineering_step1_encoding.py`
**목표**: 범주형 변수별 통계적 검증 시스템 구축

**To-Do:**

- [x] `statistical_validation()` 함수 생성
- [x] 카이제곱 독립성 검정 자동화
- [x] 범주별 부도율 분석 함수 구현
- [x] 이중 축 시각화 함수 생성 (개수 + 부도율)
- [x] 검정 결과 요약 리포트 생성
- [x] 모든 범주형 변수에 대한 일괄 검증 시스템

**예상 소요시간**: 2.5시간
**담당자**: 데이터 분석팀
**완료 기준**: 모든 범주형 변수에 대한 통계적 검증 시스템 구축

---

### ✅ Task 2.6: 데이터 누출 문제 발견 및 해결

**파일**: `feature_engineering/check_modeling_variables.py`
**목표**: 후행지표 변수 식별 및 제거

**To-Do:**

- [x] `analyze_posterior_variables()` 함수 생성
- [x] `analyze_approval_variables()` 함수 생성
- [x] `check_data_leakage()` 함수 생성
- [x] 후행지표 변수 35개 식별
- [x] 승인 시점 변수 80개 식별
- [x] 상관관계 비교 분석 (7.64배 차이 발견)
- [x] 데이터 누출 위험도 평가

**예상 소요시간**: 2시간
**담당자**: 데이터 분석팀
**완료 기준**: 데이터 누출 문제 완전 해결

---

### ✅ Task 2.7: 깨끗한 모델링 데이터셋 생성

**파일**: `feature_engineering/create_clean_modeling_dataset.py`
**목표**: 실제 운영 가능한 모델링 데이터셋 구축

**To-Do:**

- [x] `identify_posterior_variables()` 함수 생성
- [x] `identify_approval_variables()` 함수 생성
- [x] `create_clean_dataset()` 함수 생성
- [x] 후행지표 변수 완전 제거
- [x] 승인 시점 변수만 사용
- [x] 데이터 크기 최적화 (155개 → 81개 변수)
- [x] 깨끗한 데이터셋 저장

**예상 소요시간**: 1.5시간
**담당자**: 특성 엔지니어링팀
**완료 기준**: 실제 운영 가능한 모델링 데이터셋 완성

---

### ✅ Task 2.8: 완전한 모델링 파이프라인 구축

**파일**: `modeling/credit_risk_modeling_pipeline.py`
**목표**: 전처리부터 평가까지 완전한 파이프라인

**To-Do:**

- [x] `CreditRiskModelingPipeline` 클래스 생성
- [x] 데이터 로드 및 전처리 함수
- [x] 특성 준비 및 선택 함수
- [x] 모델 훈련 함수 (로지스틱, 랜덤포레스트, 그래디언트 부스팅)
- [x] 모델 평가 함수
- [x] 시각화 및 리포트 생성
- [x] 최고 성능 모델 선택

**예상 소요시간**: 3시간
**담당자**: 모델링팀
**완료 기준**: 완전한 모델링 파이프라인 구축 및 랜덤포레스트 ROC-AUC 0.6709 달성

---

## 📈 Phase 3: 장기 적용 가능한 개선사항 (Low Priority)

### ⏳ Task 3.1: 데이터 품질 검증 강화

**파일**: `data_analysis/data_exploration.py`
**목표**: 더 상세한 데이터 품질 검증

**To-Do:**

- [ ] `enhanced_data_quality_report()` 함수 생성
- [ ] 메모리 사용량 분석 추가
- [ ] 이상값 검출 로직 구현
- [ ] 데이터 품질 리포트 생성
- [ ] 품질 지표 시각화 추가
- [ ] 범주형 변수별 통계적 검증 시스템 구현
- [ ] 카이제곱 독립성 검정 자동화
- [ ] 이중 축 시각화 (개수 + 부도율) 구현
- [ ] 범주별 부도율 분석 리포트 생성

**예상 소요시간**: 3시간
**담당자**: 데이터 분석팀
**완료 기준**: 포괄적인 데이터 품질 리포트 및 통계적 검증 시스템 구축

---

### ⏳ Task 3.2: 날짜 데이터 처리 개선

**파일**: `feature_engineering/feature_engineering_step3_new_features.py`
**목표**: 더 정교한 날짜 데이터 처리

**To-Do:**

- [ ] `create_time_based_features()` 함수 생성
- [ ] 신용 이력 기간 계산 로직 구현
- [ ] 대출 발행 시점 정보 추출
- [ ] 계절성 특성 생성
- [ ] 시간 기반 특성 검증

**예상 소요시간**: 2시간
**담당자**: 특성 엔지니어링팀
**완료 기준**: 시간 기반 특성이 체계적으로 생성됨

---

### ⏳ Task 3.3: 전처리 파이프라인 통합

**파일**: 새로운 통합 스크립트 생성
**목표**: 모든 개선사항을 통합한 완전한 파이프라인

**To-Do:**

- [ ] `integrated_preprocessing_pipeline.py` 생성
- [ ] 모든 개선사항을 순차적으로 적용
- [ ] 각 단계별 검증 포인트 추가
- [ ] 파이프라인 실행 시간 측정
- [ ] 결과 데이터 품질 리포트 생성
- [ ] 범주형 변수별 통계적 검증 자동화
- [ ] 시각화 리포트 자동 생성
- [ ] 카이제곱 검정 결과 요약 리포트
- [ ] 범주별 부도율 분석 리포트

**예상 소요시간**: 4시간
**담당자**: 전체 개발팀
**완료 기준**: 완전한 전처리 파이프라인 및 자동화된 검증 시스템 구축

---

## 🔧 Phase 4: 테스트 및 검증

### ⏳ Task 4.1: 단위 테스트 작성

**목표**: 각 개선사항의 정확성 검증

**To-Do:**

- [ ] 각 함수별 단위 테스트 작성
- [ ] 예외 상황 테스트 추가
- [ ] 테스트 커버리지 측정
- [ ] 자동화된 테스트 실행

**예상 소요시간**: 4시간
**담당자**: QA팀
**완료 기준**: 모든 함수의 테스트 커버리지 90% 이상

---

### ⏳ Task 4.2: 성능 테스트

**목표**: 개선사항 적용 후 성능 변화 측정

**To-Do:**

- [ ] 기존 모델 성능 베이스라인 측정
- [ ] 개선사항 적용 후 성능 측정
- [ ] 성능 향상도 분석
- [ ] 성능 리포트 생성

**예상 소요시간**: 2시간
**담당자**: 데이터 과학팀
**완료 기준**: 모델 성능이 향상됨을 확인

---

### ⏳ Task 4.3: 문서화 업데이트

**목표**: 개선사항을 반영한 문서 업데이트

**To-Do:**

- [ ] README.md 업데이트
- [ ] API 문서 업데이트
- [ ] 사용자 가이드 업데이트
- [ ] 변경사항 로그 작성

**예상 소요시간**: 1시간
**담당자**: 기술 문서팀
**완료 기준**: 모든 문서가 최신 상태로 업데이트

---

## 🆕 Phase 5: 추가 전처리 강화 (Critical Priority)

### ⏳ Task 5.1: 고결측치 변수 처리 강화

**파일**: `feature_engineering/feature_engineering_step2_scaling.py`
**목표**: 결측치가 30% 이상인 중요 변수들의 체계적 처리

**To-Do:**

- [ ] `handle_high_missing_features()` 함수 생성
- [ ] mths_since_last_delinq (52.54%) 처리 로직 구현
- [ ] mths_since_last_record (85.38%) 처리 로직 구현
- [ ] mths_since_last_major_derog (75.31%) 처리 로직 구현
- [ ] next_pymnt_d (63.57%) 처리 로직 구현
- [ ] 결측치 패턴 분석 및 대체 전략 수립
- [ ] 결측치 처리 효과 검증 시스템

**예상 소요시간**: 3시간
**담당자**: 데이터 분석팀
**완료 기준**: 고결측치 변수들이 적절히 처리되고 검증 완료

---

### ⏳ Task 5.2: 시간 기반 변수 처리 개선

**파일**: `feature_engineering/feature_engineering_step3_new_features.py`
**목표**: 날짜 변수들의 체계적 처리 및 시간 기반 특성 생성

**To-Do:**

- [ ] `enhance_time_based_features()` 함수 생성
- [ ] 날짜 변수 파싱 및 변환 로직 구현
- [ ] 신용 이력 기간 계산 강화
- [ ] 대출 발행 시점 정보 추출
- [ ] 계절성 및 경제 사이클 특성 생성
- [ ] 시간 기반 특성 검증 시스템 구현
- [ ] 시간 기반 특성 중요도 분석

**예상 소요시간**: 2.5시간
**담당자**: 특성 엔지니어링팀
**완료 기준**: 시간 기반 특성이 체계적으로 생성되고 검증 완료

---

### ⏳ Task 5.3: 특성 선택 전략 개선

**파일**: `feature_engineering/feature_selection_analysis.py`
**목표**: 전향적 특성만 선택하고 후행 지표 제외

**To-Do:**

- [ ] `improve_feature_selection()` 함수 생성
- [ ] 전향적 특성만 선택 (대출 승인 시점 기준)
- [ ] 후행 지표 제외 (total_rec_late_fee, recoveries 등)
- [ ] 중복 특성 통합 (상관관계 높은 특성들)
- [ ] 특성 중요도 재평가 및 순위 조정
- [ ] 최종 특성 목록 업데이트
- [ ] 특성 선택 결과 검증

**예상 소요시간**: 2시간
**담당자**: 특성 엔지니어링팀
**완료 기준**: 전향적 특성만으로 구성된 최적 특성 목록 완성

---

### ⏳ Task 5.4: 복합 지표 생성 강화

**파일**: `feature_engineering/feature_engineering_step3_new_features.py`
**목표**: 더 정교한 복합 지표 생성

**To-Do:**

- [ ] `create_advanced_composite_features()` 함수 생성
- [ ] 신용 점수 변화율 계산 개선
- [ ] 소득 대비 부채 비율 세분화
- [ ] 연체 심각도 점수 체계화
- [ ] 신용 이용률 위험도 정교화
- [ ] 계좌 다양성 점수 계산
- [ ] 복합 지표 검증 시스템 구현
- [ ] 복합 지표 중요도 분석

**예상 소요시간**: 3시간
**담당자**: 특성 엔지니어링팀
**완료 기준**: 정교한 복합 지표들이 생성되고 검증 완료

---

### ⏳ Task 5.5: 데이터 품질 모니터링 시스템

**파일**: 새로운 모니터링 스크립트 생성
**목표**: 실시간 데이터 품질 모니터링 시스템 구축

**To-Do:**

- [ ] `data_quality_monitoring()` 함수 생성
- [ ] 실시간 데이터 품질 체크 시스템
- [ ] 이상값 자동 감지 및 알림
- [ ] 결측치 패턴 모니터링
- [ ] 특성 분포 변화 추적
- [ ] 품질 지표 대시보드 생성
- [ ] 품질 리포트 자동 생성

**예상 소요시간**: 2.5시간
**담당자**: 데이터 분석팀
**완료 기준**: 실시간 데이터 품질 모니터링 시스템 구축 완료

---

## 📊 진행 상황 추적

### Phase 1 진행률: 4/4 (100%)

- [x] Task 1.1: 데이터 로딩 개선
- [x] Task 1.2: 타겟 변수 생성 로직 개선
- [x] Task 1.3: 이상 로우 제거 로직 추가
- [x] Task 1.4: 문자열 데이터 정리 강화

### Phase 2 진행률: 8/8 (100%)

- [x] Task 2.1: FICO 점수 처리 방식 개선
- [x] Task 2.2: 범주형 변수 인코딩 개선
- [x] Task 2.3: 이상값 처리 강화
- [x] Task 2.4: 주(state) 데이터 처리 개선
- [x] Task 2.5: 통계적 검증 시스템 구축
- [x] Task 2.6: 데이터 누출 문제 발견 및 해결
- [x] Task 2.7: 깨끗한 모델링 데이터셋 생성
- [x] Task 2.8: 완전한 모델링 파이프라인 구축

### Phase 3 진행률: 0/3 (0%)

- [ ] Task 3.1: 데이터 품질 검증 강화
- [ ] Task 3.2: 날짜 데이터 처리 개선
- [ ] Task 3.3: 전처리 파이프라인 통합

### Phase 4 진행률: 0/3 (0%)

- [ ] Task 4.1: 단위 테스트 작성
- [ ] Task 4.2: 성능 테스트
- [ ] Task 4.3: 문서화 업데이트

### Phase 5 진행률: 0/5 (0%)

- [ ] Task 5.1: 고결측치 변수 처리 강화
- [ ] Task 5.2: 시간 기반 변수 처리 개선
- [ ] Task 5.3: 특성 선택 전략 개선
- [ ] Task 5.4: 복합 지표 생성 강화
- [ ] Task 5.5: 데이터 품질 모니터링 시스템

---

## 🎯 성공 지표

### 기술적 지표

- [x] 데이터 로딩 경고 메시지 제거
- [x] 타겟 변수 분포 정확성 95% 이상
- [x] 이상값 처리 후 데이터 품질 향상
- [x] 모델 성능 향상 (AUC 0.02 이상 개선)
- [ ] 고결측치 변수 처리 완료
- [ ] 전향적 특성만 사용하여 모델 구축
- [x] 데이터 누출 문제 완전 해결
- [x] 완전한 모델링 파이프라인 구축

### 프로세스 지표

- [ ] 모든 Phase 완료
- [ ] 테스트 커버리지 90% 이상
- [ ] 문서화 완료율 100%

### 비즈니스 지표

- [x] 전처리 시간 단축 20% 이상
- [x] 모델 예측 정확도 향상
- [x] 데이터 품질 향상으로 인한 신뢰도 증대
- [x] 실제 운영 가능한 모델 구축

---

## 📅 예상 일정

**Phase 1**: 1주일 (즉시 적용) ✅
**Phase 2**: 2.5주일 (단기 적용) ✅
**Phase 3**: 3주일 (장기 적용) ⏳
**Phase 4**: 1주일 (테스트 및 검증) ⏳
**Phase 5**: 2주일 (추가 전처리 강화) ⏳

**총 예상 소요시간**: 9.5주일 (진행률: 47%)

---

## 🚨 리스크 관리

### 기술적 리스크

- **데이터 손실 위험**: 각 단계별 백업 생성 ✅
- **성능 저하 위험**: 단계별 성능 모니터링 ✅
- **호환성 문제**: 기존 코드와의 호환성 검증 ✅

### 프로젝트 리스크

- **일정 지연**: 버퍼 시간 확보 ⏳
- **리소스 부족**: 우선순위 조정 ⏳
- **품질 저하**: 지속적인 검증 ⏳

---

## 📞 담당자 연락처

- **프로젝트 매니저**: [담당자명]
- **기술 리드**: [담당자명]
- **데이터 분석팀**: [담당자명]
- **개발팀**: [담당자명]
- **QA팀**: [담당자명]

---

## 📝 주의사항

1. **단계별 적용**: 한 번에 모든 개선사항을 적용하지 말고 단계별로 진행 ✅
2. **백업 필수**: 각 단계 시작 전 데이터 및 코드 백업 ✅
3. **검증 필수**: 각 단계 완료 후 반드시 검증 수행 ✅
4. **문서화**: 모든 변경사항을 즉시 문서화 ✅
5. **팀 협업**: 각 단계별 담당자 간 긴밀한 협업 ✅
6. **전향적 특성**: 대출 승인 시점에 알 수 있는 정보만 사용 ✅
7. **데이터 품질**: 지속적인 데이터 품질 모니터링 ✅
8. **데이터 누출 방지**: 후행지표 변수 절대 사용 금지 ✅

---

## 🎉 최종 성과 요약

### 주요 성과

1. **데이터 품질 향상**: 체계적인 전처리로 데이터 품질 대폭 개선
2. **모델 성능 향상**: 랜덤포레스트 ROC-AUC 0.6709 달성
3. **데이터 누출 해결**: 후행지표 완전 제거로 실제 운영 가능한 모델 구축
4. **완전한 파이프라인**: 전처리부터 평가까지 완전한 모델링 파이프라인 구축
5. **문서화 완성**: 모든 과정에 대한 상세한 문서화 완료

### 다음 단계

1. **하이퍼파라미터 튜닝**: 모델 성능 추가 향상
2. **앙상블 모델**: 다중 모델 조합으로 성능 극대화
3. **금융 모델링**: Sharpe Ratio 기반 평가 시스템 구축

---

_이 To-Do 리스트는 프로젝트 진행 상황에 따라 지속적으로 업데이트됩니다._
